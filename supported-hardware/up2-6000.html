

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>UP Xtreme i11 Board &mdash; Slim Bootloader 1.0 documentation</title>




    <link rel="shortcut icon" href="../_static/sbl_logo_blue_32x32_icon.ico"/>












  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Comet Lake RVP Board" href="cml-rvp.html" />
    <link rel="prev" title="UP Xtreme Board" href="upxtreme.html" />


  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">


  <div class="wy-grid-for-nav">


    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">



            <a href="../index.html" class="icon icon-home"> Slim Bootloader




            <img src="../_static/sbl_logo_white_200x200.png" class="logo" alt="Logo"/>

          </a>




              <div class="version">
                1.0
              </div>




<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">






              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/index.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Supported Hardware</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="qemu.html">QEMU Virtual Platform</a></li>
<li class="toctree-l2"><a class="reference internal" href="qsp.html">Simics® QSP Virtual Platform</a></li>
<li class="toctree-l2"><a class="reference internal" href="up2.html">UP<sup>2</sup> Board</a></li>
<li class="toctree-l2"><a class="reference internal" href="apollo-lake-crb.html">Apollo Lake CRB Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="whl-crb.html">Whiskey Lake CRB Board</a></li>
<li class="toctree-l2"><a class="reference internal" href="cfl-crb.html">Coffee Lake Refresh CRB Board</a></li>
<li class="toctree-l2"><a class="reference internal" href="upxtreme.html">UP Xtreme Board</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">UP 6000 Board</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="#board-setup">Board Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#before-you-start">Before You Start</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building">Building</a></li>
<li class="toctree-l3"><a class="reference internal" href="#stitching">Stitching</a></li>
<li class="toctree-l3"><a class="reference internal" href="#slimbootloader-binary-for-capsule">Slimbootloader binary for capsule</a></li>
<li class="toctree-l3"><a class="reference internal" href="#triggering-firmware-update">Triggering Firmware Update</a></li>
<li class="toctree-l3"><a class="reference internal" href="#flashing">Flashing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cml-rvp.html">Comet Lake RVP Board</a></li>
<li class="toctree-l2"><a class="reference internal" href="tgl-rvp.html">Tiger Lake RVP Board</a></li>
<li class="toctree-l2"><a class="reference internal" href="ehl-crb.html">Elkhart Lake CRB Board</a></li>
<li class="toctree-l1"><a class="reference internal" href="up2-6000.html">UP<sup>2</sup> 6000 Board</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developer-guides/index.html">Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/index.html">Security Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-tos/index.html">Cook Book</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../specs/index.html">Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/references.html">References and Links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/terminology.html">Terminology and Acronyms</a></li>
</ul>



        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">


      <nav class="wy-nav-top" aria-label="top navigation">

          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Slim Bootloader</a>

      </nav>


      <div class="wy-nav-content">

        <div class="rst-content">

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">

      <li><a href="../index.html">Docs</a> &raquo;</li>

          <li><a href="index.html">Supported Hardware</a> &raquo;</li>

      <li>UP 6000 Board</li>


      <li class="wy-breadcrumbs-aside">



      </li>

  </ul>


  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">

  <div class="section" id="upx11-board">
<span id="id1"></span><h1>UP Squared 6000 Board<a class="headerlink" href="#upx11-board" title="Permalink to this headline">¶</a></h1>
<p>The <a href="https://up-shop.org/ups6000-edge-system-series.html" target="_blank">UP Squared 6000 Board</a> is an x86 maker board based on Intel platform Elkhartlake. The UP boards are used in IoT, industrial automation, digital signage areas, etc.</p>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>SBL supports UP Squared 6000 maker board. To start developing SBL, the following equipment, software and environments are required:</p>
<ul class="simple">
<li><a href="https://up-shop.org/ups6000-edge-system-series.html" target="_blank">UP 6000 Board</a></li>
<li>Custom SPI flashing cable (<a href="https://wiki.up-community.org/BIOS_chip_flashing_on_UP_Squared" target="_blank">instructions</a>).</li>
<li><a href="https://up-shop.org/up-peripherals/110-usb-20-pin-header-cable.html" target="_blank">USB 2.0 pin header cable</a> for debug uart output. OR <a class="reference internal" href="#upx11-debug-uart-pinout">Make your own</a>.</li>
<li>DediProg SF100 or SF600 programmer</li>
<li>Linux host (see <a class="reference internal" href="../getting-started/build-host-setup.html#running-on-linux"><span class="std std-ref">Building on Linux</span></a> for details)</li>
<li>Internet access</li>
</ul>
</div>
<div class="section" id="board-setup">
<h2>Board Setup<a class="headerlink" href="#board-setup" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="../_images/up2_6000_setup.jpg"><img alt="|UPX11| Board Setup" class="align-center" src="../_images/up2_6000_setup.jpg" style="width: 600px;" /></a>
</div>
<div class="section" id="before-you-start">
<h2>Before You Start<a class="headerlink" href="#before-you-start" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">As you plan to reprogram the SPI flash, it’s a good idea to backup the pre-installed BIOS image first.</p>
</div>
<p>Boot the board and enter BIOS setup menu to get familiar with the board features and settings.</p>
<p id="upx11-debug-uart-pinout">Early boot serial debug console can be reached via UART2 located on CN49 header on the UP 6000 board. Make sure you can observe serial output message running the factory BIOS first.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>To make your own UART debug adapter by direct wiring, refer to CN49 Header Pinout for UART2:</p>
<table border="1" class="last docutils">
<colgroup>
<col width="36%" />
<col width="64%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Pin</td>
<td>Signal</td>
</tr>
<tr class="row-even"><td>8</td>
<td>GND</td>
</tr>
<tr class="row-odd"><td>9</td>
<td>UART_RX</td>
</tr>
<tr class="row-even"><td>10</td>
<td>UART_TX</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="building">
<h2>Building<a class="headerlink" href="#building" title="Permalink to this headline">¶</a></h2>
<p>UP Squared 6000 board is based on Intel Elkhart Lake. To build:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">BuildLoader</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span> <span class="n">ehl</span>
</pre></div>
</div>
<p>The output images are generated under <code class="docutils literal notranslate"><span class="pre">Outputs</span></code> directory.</p>
</div>
<div class="section" id="stitching">
<h2>Stitching<a class="headerlink" href="#stitching" title="Permalink to this headline">¶</a></h2>
<p>Stitch SBL images with factory BIOS image using the stitch tool:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">Platform</span><span class="o">/</span><span class="n">\ElkhartlakeBoardPkg</span><span class="o">/</span><span class="n">Script</span><span class="o">/</span><span class="n">StitchLoader</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">i</span> <span class="o">&lt;</span><span class="n">BIOS_IMAGE_NAME</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">s</span> <span class="n">Outputs</span><span class="o">/</span><span class="n">ehl</span><span class="o">/</span><span class="n">SlimBootloader</span><span class="o">.</span><span class="n">bin</span> <span class="o">-</span><span class="n">o</span> <span class="o">&lt;</span><span class="n">SBL_IFWI_IMAGE_NAME</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">p</span> <span class="mh">0xAA000206</span>

<span class="o">&lt;</span><span class="n">BIOS_IMAGE</span><span class="o">&gt;</span>     <span class="p">:</span> <span class="n">Input</span> <span class="n">file</span><span class="o">.</span> <span class="n">Factory</span> <span class="n">BIOS</span> <span class="n">extracted</span> <span class="kn">from</span> <span class="nn">UP</span> <span class="n">Squared</span> <span class="n">6000</span> <span class="n">board</span><span class="o">.</span>
<span class="o">&lt;</span><span class="n">SBL_IFWI_IMAGE</span><span class="o">&gt;</span> <span class="p">:</span> <span class="n">Output</span> <span class="n">file</span><span class="o">.</span> <span class="n">New</span> <span class="n">IFWI</span> <span class="n">image</span> <span class="k">with</span> <span class="n">SBL</span> <span class="ow">in</span> <span class="n">BIOS</span> <span class="n">region</span><span class="o">.</span>
<span class="o">-</span><span class="n">p</span> <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span>       <span class="p">:</span> <span class="mi">4</span><span class="o">-</span><span class="n">byte</span> <span class="n">platform</span> <span class="n">data</span> <span class="k">for</span> <span class="n">platform</span> <span class="n">ID</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span> <span class="mi">06</span><span class="p">)</span> <span class="ow">and</span> <span class="n">debug</span> <span class="n">UART</span> <span class="n">port</span> <span class="n">index</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span> <span class="mi">02</span><span class="p">)</span><span class="o">.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">StitchLoader.py script works only if Boot Guard in the base image is not enabled, and the silicon is not fused with Boot Guard enabled.
If Boot Guard is enabled, please use StitchIfwi.py script instead.</p>
</div>
<p>See <a class="reference internal" href="../tools/StitchTool.html#stitch-tool"><span class="std std-ref">Stitch Tool</span></a> on how to stitch the IFWI image with SBL.</p>
</div>
<div class="section" id="slimbootloader-binary-for-capsule">
<h2>Slimbootloader binary for capsule<a class="headerlink" href="#slimbootloader-binary-for-capsule" title="Permalink to this headline">¶</a></h2>
<p>Creating Slimbootloader binary for capsule image requires the following steps:</p>
<p>Build SBL for UP Squared 6000:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">BuildLoader</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span> <span class="n">ehl</span>
</pre></div>
</div>
<p>Run stitching process as described above to create a SBL IFWI binary <code class="docutils literal notranslate"><span class="pre">sbl_up2_6000_ifwi.bin</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">Platform</span><span class="o">/</span><span class="n">ElkhartlakeBoardPkg</span><span class="o">/</span><span class="n">Script</span><span class="o">/</span><span class="n">StitchLoader</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">i</span> <span class="o">&lt;</span><span class="n">BIOS_IMAGE_NAME</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">s</span> <span class="n">Outputs</span><span class="o">/</span><span class="n">ehl</span><span class="o">/</span><span class="n">SlimBootloader</span><span class="o">.</span><span class="n">bin</span> <span class="o">-</span><span class="n">o</span> <span class="n">sbl_up2_6000_ifwi</span><span class="o">.</span><span class="n">bin</span> <span class="o">-</span><span class="n">p</span> <span class="mh">0xAA000204</span>
</pre></div>
</div>
<p>Extract <code class="docutils literal notranslate"><span class="pre">bios.bin</span></code> from SBL IFWI image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">BootloaderCorePkg</span><span class="o">/</span><span class="n">Tools</span><span class="o">/</span><span class="n">IfwiUtility</span><span class="o">.</span><span class="n">py</span> <span class="n">extract</span> <span class="o">-</span><span class="n">i</span> <span class="n">sbl_up2_6000_ifwi</span><span class="o">.</span><span class="n">bin</span> <span class="o">-</span><span class="n">p</span> <span class="n">IFWI</span><span class="o">/</span><span class="n">BIOS</span> <span class="o">-</span><span class="n">o</span> <span class="n">bios</span><span class="o">.</span><span class="n">bin</span>
</pre></div>
</div>
<p>Generate capsule update image <code class="docutils literal notranslate"><span class="pre">FwuImage.bin</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">BootloaderCorePkg</span><span class="o">/</span><span class="n">Tools</span><span class="o">/</span><span class="n">GenCapsuleFirmware</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">p</span> <span class="n">BIOS</span> <span class="n">bios</span><span class="o">.</span><span class="n">bin</span> <span class="o">-</span><span class="n">k</span> <span class="n">KEY_ID_FIRMWAREUPDATE_RSA3072</span> <span class="o">-</span><span class="n">o</span> <span class="n">FwuImage</span><span class="o">.</span><span class="n">bin</span>
</pre></div>
</div>
</div>
<div class="section" id="triggering-firmware-update">
<h2>Triggering Firmware Update<a class="headerlink" href="#triggering-firmware-update" title="Permalink to this headline">¶</a></h2>
<p>Please refer to <a class="reference internal" href="../security/firmware-update.html#firmware-update"><span class="std std-ref">Firmware Update</span></a> on how to trigger firmware update flow.
Below is an example:</p>
<p>To trigger firmware update in SBL shell:</p>
<ol class="arabic">
<li><p class="first">Copy <code class="docutils literal notranslate"><span class="pre">FwuImage.bin</span></code> into root directory on FAT partition of a USB key</p>
</li>
<li><p class="first">Boot and press any key to enter SBL shell</p>
</li>
<li><p class="first">Type command <code class="docutils literal notranslate"><span class="pre">fwupdate</span></code> from shell</p>
<p>Observe SBL resets the platform and performs update flow. It resets <em>multiple</em> times to complete the update process.</p>
</li>
</ol>
</div>
<div class="section" id="flashing">
<h2>Flashing<a class="headerlink" href="#flashing" title="Permalink to this headline">¶</a></h2>
<p>Flash the IFWI image to UP Squared 6000 board using a SPI programmer. Header CN57 on the board should be used, see <a href="https://wiki.up-community.org/BIOS_chip_flashing_on_UP_Squared" target="_blank">instructions</a> for additional details.</p>
<p><strong>Good Luck!</strong></p>
</div>
</div>


           </div>

          </div>
          <footer>

    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">

        <a href="cml-rvp.html" class="btn btn-neutral float-right" title="Comet Lake RVP Board" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>


        <a href="upxtreme.html" class="btn btn-neutral" title="UP Xtreme Board" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>

    </div>


  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Intel Corporation
      Last updated on Oct 11, 2021.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>







      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>




  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

</body>
</html>